from django.shortcuts import render_to_response
from django.template.context import RequestContext
from models import User


def index(request):
    return render_to_response('data_app/index.html', {}, context_instance=RequestContext(request))


def users(request):
    list = []
    members = User()._data.keys()
    sections = ["2012:1:01:160:171:01",
                "2012:1:01:160:171:02",
                "2012:1:01:160:171:03",
                "2012:1:01:160:171:04",
                "2012:1:01:160:171:05",
                "2012:1:01:160:171:06",
                "2012:1:01:160:171:07",
                "2012:1:01:160:171:08",
                "2012:1:01:160:171:09",
                "2012:1:01:160:171:10",
                "2012:1:01:160:171:11",
                "2012:1:01:160:171:12",
                "2012:1:01:160:171:13",
                "2012:1:01:160:171:14",
                "2012:1:01:160:171:15",
                "2012:1:01:160:171:16",
                "2012:1:01:160:171:17",
                "2012:1:01:160:171:18",
                "2012:1:01:160:171:19",
                "2012:1:01:160:171:20",
                "2012:1:01:160:171:21",
                "2012:1:01:160:171:22",
                "2012:1:01:160:171:23",
                "2012:1:01:160:171:24",
                "2012:1:01:160:171:25",
                "2012:1:01:160:171:26",
                "2012:1:01:160:171:27",
                "2012:1:01:160:171:28",
                "2012:1:01:160:171:30",
                "2012:1:01:160:171:31",
                "2012:1:01:160:171:39",
                "2012:1:01:160:171:40",
                "2012:1:01:160:171:41",
                "2012:1:01:160:171:42",
                "2012:1:01:160:171:43",
                "2012:1:01:160:171:44",
                "2012:1:01:160:171:45",
                "2012:1:01:160:171:46",
                "2012:1:01:160:171:47",
                "2012:1:01:160:171:49",
                "2012:1:01:160:171:50",
                "2012:1:01:160:171:51",
                "2012:1:01:160:171:53",
                "2012:1:01:160:171:54",
                "2012:1:01:160:171:55",
                "2012:1:01:160:171:56",
                "2012:1:01:160:171:57",
                "2012:1:01:160:171:58",
                "2012:1:01:160:171:OA"]

    for user in User.objects(__raw__={"courses.id": {"$in": sections}}):
#        for user in User.objects().filter(courses=Course(id=section)).exclude("courses"):
        list.append(user._data.values())

    return render_to_response('data_app/users.html', {'vars': members, 'valsList': list})


def userLookup(request):
    return render_to_response('data_app/userLookup.html', {}, context_instance=RequestContext(request))
